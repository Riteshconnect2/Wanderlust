 <% layout("/layouts/boilerplate")%>

 <div class="row mt-4 mb-3 offset-2">  
    <h3>Your Destination</h3>  
      <div id="map"
       data-lat="<%= coords ? coords[0] : '' %>"
       data-lon="<%= coords ? coords[1] : '' %>"
       data-location="<%= listing.location ? listing.location.replace(/"/g, '&#34;') : '' %>">
      </div>
   </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
      
    const mapEl = document.getElementById('map');
    const latRaw = mapEl.dataset.lat;
    const lonRaw = mapEl.dataset.lon;
    const placeName = mapEl.dataset.location || 'Location';

     
    const fallbackLat = 19.4178;
    const fallbackLon = 72.8225;

    const lat = latRaw ? parseFloat(latRaw) : fallbackLat;
    const lon = lonRaw ? parseFloat(lonRaw) : fallbackLon;

    const map = L.map('map').setView([lat, lon], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
     
    }).addTo(map);

   const marker = L.marker([lat, lon]).addTo(map);
   marker.bindPopup(placeName).openPopup();
  </script>